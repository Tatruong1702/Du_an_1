<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Danh Sách Khách Hàng | Staff Portal</title>
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">
    
    <link href="/assets/guide.css" rel="stylesheet"> 
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/locale/vi.min.js"></script>
    
</head>

<body>
    
    <aside class="sidebar" id="sidebar">
        <div class="logo">
            <div class="icon-wrapper">A</div>
            <div><div>Staff Portal</div><small style="font-size: 14px;">v1.0</small></div>
        </div>
        
        <hr class="text-white-50 mx-4 my-2">

        <nav>
            <div class="nav-item">
                <i class="bi bi-calendar-check me-2"></i>
                <a href="guide-schedule.html"> Lịch Trình của tôi</a>
            </div>
            <div class="nav-item active"> 
                <i class="bi bi-people-fill me-2"></i>
                <a href="guide-customer.html"> Danh sách khách hàng</a>
            </div>
            <hr class="text-white-50 mx-4 my-3">
            <div class="nav-item"><i class="bi bi-box-arrow-right me-2"></i><a href="#"> Đăng xuất</a></div>
        </nav>

        <div class="p-4 text-white small mt-auto">
            <p class="m-0 mb-1">HDV: <strong class="text-warning">Nguyễn Văn A</strong></p>
            <p class="m-0">Mã số: <small>HDV001</small></p>
        </div>
    </aside>

    <main class="main-content">
        <h2><i class="bi bi-people-fill me-2"></i> Danh Sách Khách Hàng Đã Đặt Tour</h2>

        <div class="card card-panel shadow-sm mb-4">
            <div class="card-body">
                <form id="filterForm" class="row g-3 align-items-end">
                    <div class="col-md-9">
                        <label for="tourFilter" class="form-label">Chọn Tour</label>
                        <select id="tourFilter" class="form-select">
                            <option value="">-- Chọn Tour --</option>
                        </select>
                    </div>
                    <div class="col-md-3">
                        <button type="button" class="btn btn-primary w-100" onclick="applyFilter()">Xem Khách</button>
                    </div>
                </form>
            </div>
        </div>
        
        <div class="card card-panel shadow-sm mb-4" id="tripInfo" style="display: none;">
            <div class="card-body row">
                <div class="col-md-4">
                    <strong>Tour:</strong> <span id="infoTourName"></span> (<span id="infoTourCode"></span>)
                </div>
                <div class="col-md-4">
                    <strong>HDV:</strong> <span id="infoDriver"></span> 
                </div>
                <div class="col-md-4">
                    <strong>Điểm tập kết:</strong> <span id="infoMeetingPoint"></span> 
                </div>
            </div>
        </div>

        <div class="card card-panel shadow p-0">
            <div class="card-header-staff">
                <h5 class="mb-0" id="listTitle"><i class="bi bi-person-lines-fill me-2"></i> Thông tin các lượt đặt chỗ</h5>
            </div>
            <div class="card-body p-0">
                <div class="table-responsive">
                    <table class="table mb-0">
                        <thead>
                            <tr>
                                <th>STT</th>
                                <th>Tên Khách</th> <th>Email</th>
                                <th>SĐT</th>
                                <th>SL (Khách)</th>
                                <th>Ngày Khởi Hành</th> 
                                <th>Loại Khách</th>
                                <th>Trạng Thái</th>
                            </tr>
                        </thead>
                        <tbody id="customerList">
                            <tr>
                                <td colspan="9" class="text-center text-muted p-4">Vui lòng chọn Tour và nhấn "Xem Khách".</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </main>

    <div class="modal fade" id="customerDetailModal" tabindex="-1" aria-labelledby="customerDetailModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-md">
            <div class="modal-content">
                <div class="modal-header bg-primary text-white"> 
                    <h5 class="modal-title" id="customerDetailModalLabel">Chi tiết Đặt chỗ</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <p><strong>Email:</strong> <span id="modalEmail"></span></p>
                    <p><strong>Điện thoại:</strong> <span id="modalPhone"></span></p>
                    <p><strong>Tour đặt:</strong> <span id="modalTourName"></span></p>
                    <p><strong>Loại hình:</strong> <span id="modalTravelType"></span></p>
                    <p><strong>Số lượng khách:</strong> <span id="modalQuantity"></span></p>
                    <hr>
                    <h6>Ghi chú của Khách (Nếu có):</h6>
                    <p id="modalNotes" class="text-muted fst-italic">Không có ghi chú đặc biệt.</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Đóng</button>
                </div>
            </div>
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="/controllers/guide/guide-customer.js"></script> 
</body>

</html>