<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mùa và lá rơi</title>
<style>
  body {
    margin: 0;
    min-height: 100vh;
    overflow: hidden;
    background-color: white;
    position: relative;
    transition: background-color 0.5s;
  }

  select {
    position: absolute;
    top: 20px;
    left: 50%;
    transform: translateX(-50%);
    padding: 10px;
    font-size: 16px;
    z-index: 1000;
  }

  .leaf {
    position: absolute;
    pointer-events: none;
    top: -50px;
    background-size: contain;
    background-repeat: no-repeat;
    animation-name: fall;
    animation-timing-function: linear;
    animation-iteration-count: infinite;
  }

  @keyframes fall {
    0% { transform: translate(0,0) rotate(0deg); }
    100% { transform: translate(var(--x-move), 100vh) rotate(360deg); }
  }

  /* Màu nền các mùa */
  .spring { background-color: #ffd6eb; } 
  .summer { background-color: #d4ffe7; }  
  .autumn { background-color: #fff0c2; }  
  .winter { background-color: #c2e0ff; }  
</style>
</head>
<body>

<select id="seasonSelect">
  <option value="">-- Chọn mùa --</option>
  <option value="spring">Xuân</option>
  <option value="summer">Hè</option>
  <option value="autumn">Thu</option>
  <option value="winter">Đông</option>
</select>

<script>
const seasonLeaves = {
  spring: ['/assets/image/flower1.png','/assets/image/flower2.png'],
  summer: ['/assets/image/leaf_summer1.png','/assets/image/leaf_summer2.png'],
  autumn: ['/assets/image/la1.png','/assets/image/la2.png','/assets/image/la3.png','/assets/image/la4.png'],
  winter: ['/assets/image/snow1.png','/assets/image/snow2.png']
};

const numLeaves = 30;
let leaves = []; // lưu các lá hiện tại

const select = document.getElementById('seasonSelect');
const body = document.body;

function createLeaves(leafImages){
  // Xóa lá cũ
  leaves.forEach(l => l.remove());
  leaves = [];

  for(let i=0; i<numLeaves; i++){
    const leaf = document.createElement('div');
    leaf.className = 'leaf';
    const img = leafImages[Math.floor(Math.random() * leafImages.length)];
    leaf.style.backgroundImage = `url(${img})`;

    // chia nhóm lá để rơi tự nhiên
    const group = i % 3;
    if(group===0){
      leaf.style.width = leaf.style.height = 30 + Math.random()*20 + 'px';
      leaf.style.animationDuration = 4 + Math.random()*3 + 's';
    } else if(group===1){
      leaf.style.width = leaf.style.height = 20 + Math.random()*15 + 'px';
      leaf.style.animationDuration = 6 + Math.random()*4 + 's';
    } else {
      leaf.style.width = leaf.style.height = 15 + Math.random()*10 + 'px';
      leaf.style.animationDuration = 8 + Math.random()*5 + 's';
    }

    leaf.style.left = Math.random() * 100 + 'vw';
    leaf.style.setProperty('--x-move', (Math.random()*700-100) + 'px');
    leaf.style.animationDelay = Math.random()*5 + 's';

    body.appendChild(leaf);
    leaves.push(leaf);
}
}

select.addEventListener('change', () => {
  const season = select.value;

  // Xóa class cũ
  body.classList.remove('spring','summer','autumn','winter');

  if(season){
    body.classList.add(season);
    createLeaves(seasonLeaves[season]);
  } else {
    body.style.backgroundColor = 'white';
    leaves.forEach(l => l.remove());
    leaves = [];
  }
});
</script>

</body>
</html>